# 13_own_context_testcontainers

### Цель

Научиться создавать произвольный контекст для тестов. Научиться пользоваться testcontainers

### Теория

При тестировании существует фундаментальная проблема - что делать с другими зависимыми сервисами/приложениями?

Один из способов работы с ними является замена их на какой-то промежуточный вариант. Например реальную базу данных 
иногда меняют на in-memory базу, типо H2. Или внешний сервис берут и полностью мокают клиент к нему.

И хотя такой подход работает в большинстве случаев, иногда все-таки он может давать сбои. Крайне-крайне редко наша
H2 ведет себя не так, как Postgres, в мок нашего сервиса устарел и его реальная версия уже возвращает ответ в другом формате.

Для решения этой проблемы можно было бы использовать Docker. Тогда мы могли бы поднимать точные копии каких-то контейнеров, 
которые ровно в таком же виде будут доступны на production среде и тестироваться вместе с ними. Но тут возникает еще 1 проблема -
как менеджерить жизненный цикл этих контейнеров. Как их поднимать и оживлять? Именно с этой проблемой работает библиотека
testcontainers

#### Testcontainers

[Testcontainers[1]](https://www.testcontainers.org/) - это Java библиотека, поддерживающая Junit и Spring для управления 
жизненным циклом Docker контейнеров во время проведения тестирования. Она позволяет элементарным образом тестировать 
наше приложение не на каких-то там возможно устаревших моках, а на всамделешных инстансах сервисов, с которыми будет 
работать приложение на production среде. 

Testcontainers позволяет на время жизни теста (в рамках 1 процесса) поднять все необходимые инстансы, которые являются 
внешним миром для нашего приложения (Примеры: Postgres/Cassandra/Redis/Kafka/любые другие приложения, помещенные в докер image), 
провести полноценное интеграционное тестирование, а затем убить все эти инстансы.

Распространяется это чудо под MIT лицензией, так что бояться его использовать смысла нет. Если вы еще думаете, стоит ли
использовать testcontainers - вот есть [прекрасное видео[2]](https://vimeo.com/222501136) от создателя библиотеки, которое 
поможет расставить все точки над "И", и 100% её вам продать :)

### Почитать

1. Testcontainers основная страница https://www.testcontainers.org/
2. Видео TestContainers – Richard North https://vimeo.com/222501136

### Задание
